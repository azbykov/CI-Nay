# Push keys to Yandex.Tanker
Цель для ENB по работе с API Танкера


###Термины:
* Ключи - запись в Танкер. Состоит из id исходного текста и перевода.
* Наборы ключей - список ключей для одно блока.
* Исходные тексты - id ключей и русский текст для них, служит базой для переводов.
* Переводы - тексты, переведённые переводчиками в танкере.

###Зачем
Основная задача: Добавление/актуализация ключей и исходных текстов в Танкер.

###Как это работает
* 1. Сначала мы выкачиваем из проекта танкера все наборы ключей которые находятся в ветке разработки
* 2. Собираем наборы ключей которые хранятся в проекте Git в папочке /bem/blocks/ в файлах ru.js
* 3. Сравниваем полученные наборы ключей из Танкера и проекта. Если в Танкере нет недостающих наборов ключей,
* то добавляем их. Если различий не обнаружено, то переходим на следующий шаг.
* 4. Приводим данные с наборами ключей и исходных текстов в соответствии с документацией Танкера
* http://doc.yandex-team.ru/Tanker/api-reference/concepts/formats.xml#format-tjson
* 5. Добавляем исходные тексты в Танкер с помощью метода API replace.
* http://doc.yandex-team.ru/Tanker/api-reference/concepts/operations-translations.xml


подключаем в `.bem/enb-make.js`:

```javascript
var pushKeysToTanker = require('push-keys-to-tanker');

module.exports = function(config) {
	// ...
	config.task('push-keys', function(task) {
		return pushKeysToTanker(task, config);
	});
};
```
